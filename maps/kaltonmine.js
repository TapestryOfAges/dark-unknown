"use strict";

// MAP BEGINS HERE
mappages["kaltonmine1"] = {};
mappages["kaltonmine1"].terrain = [];
 mappages["kaltonmine1"].terrain[0] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["kaltonmine1"].terrain[1] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["kaltonmine1"].terrain[2] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["kaltonmine1"].terrain[3] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK cw cw cw cw cw cw cw cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["kaltonmine1"].terrain[4] = 'BK BK BK BK BK BK BK BK BK BK BK cw cw cw cf cf cf cf cf cf cf cw cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["kaltonmine1"].terrain[5] = 'BK BK BK BK BK BK BK BK BK BK BK cw cf cf cf cf cf cf cf cf cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["kaltonmine1"].terrain[6] = 'BK BK BK BK BK BK BK BK BK BK BK cw cf cf cf cf cf cf cf cf cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["kaltonmine1"].terrain[7] = 'BK BK BK BK BK BK BK BK BK BK BK cw cw cw cf cf cf cf cf cf cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["kaltonmine1"].terrain[8] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK cw cw cw cf cf cf cf cf cf cf cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["kaltonmine1"].terrain[9] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cw cf cf cf cf cf cf cf cw cw BK BK BK BK cw cw cw cw cw cw cw BK BK BK BK BK';
mappages["kaltonmine1"].terrain[10] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cw cw cf cf cf cf cf cf cf cw BK BK BK cw cw cf cf cf cf cf cw cw BK BK BK BK';
mappages["kaltonmine1"].terrain[11] = 'BK BK BK BK BK BK BK BK BK BK BK BK cw cw cw cw cf cf cf cf cf cf cf cw cw cw cw cw cw cw cf cf cf cf cf cf cf cw cw BK BK BK';
mappages["kaltonmine1"].terrain[12] = 'BK BK BK BK BK BK BK BK BK BK BK BK cw cf cf cf cf cf cf cf cf cw cw cw BK cw cw cf cf cf cf cf cf cf cf cf cf cf cw BK BK BK';
mappages["kaltonmine1"].terrain[13] = 'BK BK BK BK BK BK BK BK BK BK cw cw cw cf cf cf cf cf cf cf cw cw BK BK cw cw cf cf cf cw cf cf cf cf cf cf cf cf cw BK BK BK';
mappages["kaltonmine1"].terrain[14] = 'BK BK BK BK BK BK cw cw cw cw cw cf cf cf cf cf cf cf cf cw cw BK cw cw cw cf cf cf cf cf cf cf cf cf cf cf cf cf cw cw BK BK';
mappages["kaltonmine1"].terrain[15] = 'BK BK BK BK BK cw cw cf cf cf cf cf cf cf cf cw cf cf cf cw BK cw cw cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cw BK BK';
mappages["kaltonmine1"].terrain[16] = 'BK BK BK BK cw cw cf cf cf cf cf cf cf cf cf cf cf cf cf cw cw cw cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cw BK BK';
mappages["kaltonmine1"].terrain[17] = 'BK BK BK BK cw cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cw cw cw cw cw cf cf cf cf cf cf cf cw BK BK';
mappages["kaltonmine1"].terrain[18] = 'BK BK BK BK cw cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cw cw BK BK BK cw cf cf cf cf cf cf cf cw BK BK';
mappages["kaltonmine1"].terrain[19] = 'BK BK BK BK cw cf cf cf cf cf cf cf cf cw cf cf cf cf cf cf cf cf cf cf cf cw cw BK BK BK BK cw cw cf cf cf cf cf cf cw BK BK';
mappages["kaltonmine1"].terrain[20] = 'BK BK BK BK cw cw cf cf cf cf cf cf cw cw cf cf cf cf cf cf cw cf cf cf cw cw BK BK BK BK BK BK cw cf cf cf cf cf cf cw BK BK';
mappages["kaltonmine1"].terrain[21] = 'BK BK BK BK BK cw cw cw cf cf cf cf cw cw cw cf cf cf cf cf cf cf cf cf cw BK BK BK BK BK BK BK cw cw cw cf cf cf cf cw BK BK';
mappages["kaltonmine1"].terrain[22] = 'BK BK BK BK BK BK BK cw cf cf cw cw cw BK cw cw cf cf cf cf cf cf cf cf cw cw BK BK BK BK BK BK BK BK cw cw cw cw cw cw BK BK';
mappages["kaltonmine1"].terrain[23] = 'BK BK BK BK BK BK BK cw cw cw cw BK BK BK BK cw cw cw cf cf cf cf cf cf cf cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[24] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cw cf cf cf cf cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[25] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cf cf cf cf cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[26] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cw cf cf cf cf cf cf cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[27] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cw cf cf cf cf cf cf cf cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[28] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cw cw cf cf cf cf cf cf cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[29] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK cw cw cw cw cf cf cf cf cf cf cf cf cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[30] = 'BK BK BK BK BK BK BK BK BK BK BK BK cw cw cf cf cf cf cf cf cf cf cf cf cf cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[31] = 'BK BK BK BK BK BK BK BK BK cw cw cw cw cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[32] = 'BK BK BK BK BK BK BK BK BK cw cf cf cf cf cf cf cf cf cf cf cf cf cw cf cf cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[33] = 'BK BK BK BK BK BK BK BK BK cw cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[34] = 'BK BK BK BK BK BK BK BK BK cw cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[35] = 'BK BK BK BK BK BK BK BK BK cw cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[36] = 'BK BK BK BK BK BK BK BK BK cw cw cw cf cf cf cf cf cf cf cf cf cf cf cw cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[37] = 'BK BK BK BK BK BK BK BK BK BK BK cw cw cw cw cf cf cf cf cf cw cw cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[38] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cw cw cw cw cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[39] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[40] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine1"].terrain[41] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';

mappages["kaltonmine1"].features = [];
mappages["kaltonmine1"].features[0] = {name : 'LadderUp', x : 15, y : 5, entermap : 'darkunknown', enterx : 39, entery : 48};
mappages["kaltonmine1"].features[1] = {name : 'PetrifiedReaper', x : 34, y : 19};
mappages["kaltonmine1"].features[2] = {name : 'PetrifiedReaper', x : 36, y : 19};
mappages["kaltonmine1"].features[3] = {name : 'PetrifiedReaper', x : 37, y : 18};
mappages["kaltonmine1"].features[4] = {name : 'PetrifiedReaper', x : 35, y : 17};
mappages["kaltonmine1"].features[5] = {name : 'PetrifiedReaper', x : 37, y : 15};
mappages["kaltonmine1"].features[6] = {name : 'PetrifiedReaper', x : 35, y : 13};
mappages["kaltonmine1"].features[7] = {name : 'PileOfRocks', x : 10, y : 32};
mappages["kaltonmine1"].features[8] = {name : 'PileOfRocks', x : 11, y : 35};
mappages["kaltonmine1"].features[9] = {name : 'PileOfRocks', x : 17, y : 37};
mappages["kaltonmine1"].features[10] = {name : 'PileOfRocks', x : 18, y : 37};
mappages["kaltonmine1"].features[11] = {name : 'PileOfRocks', x : 27, y : 31};
mappages["kaltonmine1"].features[12] = {name : 'PileOfRocks', x : 24, y : 23};
mappages["kaltonmine1"].features[13] = {name : 'PileOfRocks', x : 18, y : 22};
mappages["kaltonmine1"].features[14] = {name : 'LadderDown', x : 14, y : 33, entermap : 'kaltonmine2', enterx : 21, entery : 39};


mappages["kaltonmine1"].npcs = [];
mappages["kaltonmine1"].npcs[0] = {name : 'GiantRatNPC', x : 8, y : 17, skintone: '1'};
mappages["kaltonmine1"].npcs[1] = {name : 'GiantRatNPC', x : 9, y : 20, skintone: '1'};
mappages["kaltonmine1"].npcs[2] = {name : 'GiantRatNPC', x : 16, y : 18, skintone: '1'};
mappages["kaltonmine1"].npcs[3] = {name : 'GiantRatNPC', x : 24, y : 26, skintone: '1'};
mappages["kaltonmine1"].npcs[4] = {name : 'SlimeNPC', x : 15, y : 32, Gender: 'monster', NPCBand: '1', skintone: '1'};
mappages["kaltonmine1"].npcs[5] = {name : 'SlimeNPC', x : 17, y : 31, Gender: 'monster', NPCBand: '1', skintone: '1'};
mappages["kaltonmine1"].npcs[6] = {name : 'SlimeNPC', x : 18, y : 32, Gender: 'monster', NPCBand: '1', skintone: '1'};
mappages["kaltonmine1"].npcs[7] = {name : 'SlimeNPC', x : 21, y : 34, Gender: 'monster', NPCBand: '1', skintone: '1'};
mappages["kaltonmine1"].npcs[8] = {name : 'SlimeNPC', x : 17, y : 35, Gender: 'monster', NPCBand: '1', skintone: '1'};

mappages["kaltonmine1"].desc = "Kalton Mine (L1)";
mappages["kaltonmine1"].longdesc = `A long time ago, this was a productive mine- primarily for gemstones, you think. But when monsters took it over, the miners fled.`;
mappages["kaltonmine1"].music = 'Dungeon';
mappages["kaltonmine1"].savename = `Kalton Mine`;
mappages["kaltonmine1"].exitmap = 'darkunknown';
mappages["kaltonmine1"].exitx = '39';
mappages["kaltonmine1"].exity = '48';
mappages["kaltonmine1"].wraps = 'None';
mappages["kaltonmine1"].enterx = '15';
mappages["kaltonmine1"].entery = '5';
mappages["kaltonmine1"].seeBelow = '';
mappages["kaltonmine1"].lightLevel = 'dark';
mappages["kaltonmine1"].alwaysRemember = '0';
mappages["kaltonmine1"].scale = '1';
mappages["kaltonmine1"].underground = '1';
mappages["kaltonmine1"].undergroundDesc = 'Underground';
mappages["kaltonmine1"].enterscript = '';
mappages["kaltonmine1"].entertestscript = '';
mappages["kaltonmine1"].exitscript = '';
mappages["kaltonmine1"].exittestscript = '';
mappages["kaltonmine1"].returnmap = 'darkunknown';
mappages["kaltonmine1"].returnx = '39';
mappages["kaltonmine1"].returny = '48';
mappages["kaltonmine1"].returninfused = '0';
mappages["kaltonmine1"].linkedMaps = ["kaltonmine2","kaltonmine3"];
mappages["kaltonmine1"].editorLabels = '{}';
// MAP ENDS HERE

mappages["kaltonmine1"].onload = function(mapref) {
  if ((gamestate.getMode() !== "loadgame") && (!DU.gameflags.getFlag("editor"))) {
    let spawn = localFactory.createTile("Spawner");
    let spawngroup = ["SlimeNPC"];

    spawn.setSpawngroup(spawngroup);
    spawn.setMaxSpawns(5);
    spawn.setSpawnRadius(2);

    let freq = 70 + Dice.roll("1d20");
    spawn.setSpawnFreq(freq);
  
    mapref.placeThing(18,33,spawn);

    let orc1 = mapref.getTile(17,31).getTopNPC();
    let orc2 = mapref.getTile(15,32).getTopNPC();
    let orc3 = mapref.getTile(18,22).getTopNPC();
    let orc4 = mapref.getTile(17,35).getTopNPC();
    let orc5 = mapref.getTile(21,34).getTopNPC();

    spawn.addSpawned(orc1);
    spawn.addSpawned(orc2);
    spawn.addSpawned(orc3);
    spawn.addSpawned(orc4);
    spawn.addSpawned(orc5);

    orc1.setSpawnedBy(spawn);
    orc2.setSpawnedBy(spawn);
    orc3.setSpawnedBy(spawn);
    orc4.setSpawnedBy(spawn);
    orc5.setSpawnedBy(spawn);
  }
}
// MAP BEGINS HERE
mappages["kaltonmine2"] = {};
mappages["kaltonmine2"].terrain = [];
 mappages["kaltonmine2"].terrain[0] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["kaltonmine2"].terrain[1] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["kaltonmine2"].terrain[2] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["kaltonmine2"].terrain[3] = 'BK BK BK cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw cw BK BK BK BK BK';
 mappages["kaltonmine2"].terrain[4] = 'BK BK BK cw cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cw BK BK BK BK BK';
 mappages["kaltonmine2"].terrain[5] = 'BK BK BK cw cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cw BK BK BK BK BK';
 mappages["kaltonmine2"].terrain[6] = 'BK BK BK cw cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cw BK BK BK BK BK';
 mappages["kaltonmine2"].terrain[7] = 'BK BK BK cw cf cf cf cw cw cw cw cw cf cf cf cw cw cw cw cw cw cw cf cf cf cw cw cw cw cw cw cw cw cw cw cf cf cf cf cw BK BK BK BK BK';
 mappages["kaltonmine2"].terrain[8] = 'BK BK BK cw cf cf cf cw BK BK BK cw cf cf cf cf cw BK BK BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK cw cf cf cf cf cw BK BK BK BK BK';
 mappages["kaltonmine2"].terrain[9] = 'BK BK BK cw cf cf cf cw BK BK BK cw cw cf cf cf cw BK BK BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK cw cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[10] = 'BK BK BK cw cf cf cf cw BK BK BK BK cw cf cf cf cw BK BK BK BK cw cf cf cf cw cw BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[11] = 'BK BK BK cw cf cf cf cw BK BK BK BK cw cf cf cf cw BK BK BK BK cw cf cf cf cf cw BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[12] = 'BK BK BK cw cf cf cf cw BK BK BK BK cw cf cf cf cw BK BK BK BK cw cf cf cf cf cw cw cw BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[13] = 'BK BK BK cw cf cf cf cw BK BK BK cw cw cf cf cf cw BK BK BK BK cw cf cf cf cf cf cf cw cw BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[14] = 'BK BK BK cw cf cf cf cw BK BK BK cw cf cf cf cw cw BK BK BK BK cw cf cf cf cf cf cf cf cw BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[15] = 'BK BK BK cw cf cf cf cw BK BK BK cw cf cf cf cw BK BK BK BK BK cw cw cw cw cf cf cf cf cw cw BK BK BK BK cw cw cw cw cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[16] = 'BK BK BK cw cf cf cf cw BK BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK cw cw cf cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine2"].terrain[17] = 'BK BK BK cw cf cf cf cw BK BK BK cw cw cw cw cw BK BK BK BK cw cw cw cw cw cw cw cf cf cf cw cw BK BK cw cw cw cw cw BK BK BK BK BK BK';
mappages["kaltonmine2"].terrain[18] = 'BK BK BK cw cf cf cf cw cw BK BK BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK cw cf cf cf cf cw BK BK cw cf cf cf cw BK BK BK BK BK BK';
mappages["kaltonmine2"].terrain[19] = 'BK BK BK cw cf cf cf cf cw cw cw BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK cw cw cf cf cf cw BK BK cw cf cf cf cw BK BK BK BK BK BK';
mappages["kaltonmine2"].terrain[20] = 'BK BK BK cw cf cf cf cf cf cf cw cw cw cw BK BK BK BK BK BK cw cf cf cf cw BK BK cw cf cf cf cw BK BK cw cf cf cf cw cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[21] = 'BK BK BK cw cf cf cf cf cf cf cf cf cf cw cw cw cw cw BK BK cw cf cf cf cw BK BK cw cw cf cf cw BK BK cw cf cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[22] = 'BK BK BK cw cf cf cf cf cf cf cf cf cf cf cf cf cf cw BK BK cw cf cf cf cw BK BK BK cw cw cw cw BK BK cw cf cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[23] = 'BK BK BK cw cf cf cf cw cw cw cf cf cf cf cf cf cf cw BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK BK cw cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[24] = 'BK BK BK cw cf cf cf cw BK cw cw cw cw cf cf cf cw cw BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[25] = 'BK BK BK cw cf cf cf cw BK BK BK BK cw cw cw cw cw BK BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[26] = 'BK BK BK cw cf cf cf cw cw cw cw cw cw cw cw cw cw cw cw cw cw cf cf cf cw cw cw cw cw cw cw cw cw cw cw cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[27] = 'BK BK BK cw cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[28] = 'BK BK BK cw cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[29] = 'BK BK BK cw cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[30] = 'BK BK BK cw cf cf cf cw cw cw cw cw cw cw cw cw cw cw cw cw cw cf cf cf cw cw cw cw cw cw cw cw cw cw cw cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[31] = 'BK BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[32] = 'BK BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[33] = 'BK BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[34] = 'BK BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[35] = 'BK BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[36] = 'BK BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[37] = 'BK BK BK cw cw cw cw cw BK BK BK BK BK BK BK BK BK BK BK cw cw cf cf cf cw cw BK BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[38] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cf cf cf cf cf cw BK BK BK BK BK BK BK BK BK cw cw cw cw cw BK BK BK BK BK';
mappages["kaltonmine2"].terrain[39] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cf cf cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine2"].terrain[40] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cf cf cf cf cf cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine2"].terrain[41] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cw cw cw cw cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine2"].terrain[42] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine2"].terrain[43] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine2"].terrain[44] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';

mappages["kaltonmine2"].features = [];
mappages["kaltonmine2"].features[0] = {name : 'LadderUp', x : 21, y : 39, entermap : 'kaltonmine1', enterx : 14, entery : 33};
mappages["kaltonmine2"].features[1] = {name : 'LadderDown', x : 13, y : 15, entermap : 'kaltonmine3', enterx : 12, entery : 7};
mappages["kaltonmine2"].features[2] = {name : 'PileOfRocks', x : 24, y : 40};
mappages["kaltonmine2"].features[3] = {name : 'PileOfRocks', x : 24, y : 38};
mappages["kaltonmine2"].features[4] = {name : 'PileOfRocks', x : 21, y : 19};
mappages["kaltonmine2"].features[5] = {name : 'PileOfRocks', x : 21, y : 18};
mappages["kaltonmine2"].features[6] = {name : 'PileOfRocks', x : 22, y : 18};
mappages["kaltonmine2"].features[7] = {name : 'PileOfRocks', x : 23, y : 18};
mappages["kaltonmine2"].features[8] = {name : 'PileOfRocks', x : 35, y : 18};
mappages["kaltonmine2"].features[9] = {name : 'PileOfRocks', x : 35, y : 19};
mappages["kaltonmine2"].features[10] = {name : 'PileOfRocks', x : 37, y : 19};
mappages["kaltonmine2"].features[11] = {name : 'PileOfRocks', x : 35, y : 22};
mappages["kaltonmine2"].features[12] = {name : 'PileOfRocks', x : 15, y : 24};
mappages["kaltonmine2"].features[13] = {name : 'PileOfRocks', x : 16, y : 23};
mappages["kaltonmine2"].features[14] = {name : 'PileOfRocks', x : 14, y : 22};
mappages["kaltonmine2"].features[15] = {name : 'PileOfRocks', x : 13, y : 22};
mappages["kaltonmine2"].features[16] = {name : 'PileOfRocks', x : 10, y : 23};
mappages["kaltonmine2"].features[17] = {name : 'PileOfRocks', x : 4, y : 4};
mappages["kaltonmine2"].features[18] = {name : 'PileOfRocks', x : 29, y : 16};
mappages["kaltonmine2"].features[19] = {name : 'PileOfRocks', x : 29, y : 17};
mappages["kaltonmine2"].features[20] = {name : 'PileOfRocks', x : 28, y : 20};
mappages["kaltonmine2"].features[21] = {name : 'PileOfRocks', x : 29, y : 21};
mappages["kaltonmine2"].features[22] = {name : 'PileOfRocks', x : 36, y : 13};
mappages["kaltonmine2"].features[23] = {name : 'PileOfRocks', x : 36, y : 14};
mappages["kaltonmine2"].features[24] = {name : 'PileOfRocks', x : 35, y : 8};
mappages["kaltonmine2"].features[25] = {name : 'PileOfRocks', x : 38, y : 13};
mappages["kaltonmine2"].features[26] = {name : 'PileOfRocks', x : 37, y : 14};
mappages["kaltonmine2"].features[27] = {name : 'PileOfRocks', x : 38, y : 14};
mappages["kaltonmine2"].features[28] = {name : 'PileOfRocks', x : 38, y : 12};


mappages["kaltonmine2"].npcs = [];
mappages["kaltonmine2"].npcs[0] = {name : 'EttinNPC', x : 22, y : 35, skintone: '1'};
mappages["kaltonmine2"].npcs[1] = {name : 'ReaperNPC', x : 13, y : 13, Gender: 'monster', NPCBand: '2', skintone: '1'};
mappages["kaltonmine2"].npcs[2] = {name : 'ReaperNPC', x : 14, y : 11, Gender: 'monster', NPCBand: '2', skintone: '1'};
mappages["kaltonmine2"].npcs[3] = {name : 'ReaperNPC', x : 14, y : 15, Gender: 'monster', NPCBand: '2', skintone: '1'};
mappages["kaltonmine2"].npcs[4] = {name : 'GremlinNPC', x : 36, y : 21, Gender: 'monster', NPCBand: '7', skintone: '1'};
mappages["kaltonmine2"].npcs[5] = {name : 'GremlinNPC', x : 38, y : 22, Gender: 'monster', NPCBand: '7', skintone: '1'};
mappages["kaltonmine2"].npcs[6] = {name : 'GremlinNPC', x : 37, y : 23, Gender: 'monster', NPCBand: '7', skintone: '1'};
mappages["kaltonmine2"].npcs[7] = {name : 'GremlinNPC', x : 36, y : 25, Gender: 'monster', NPCBand: '7', skintone: '1'};
mappages["kaltonmine2"].npcs[8] = {name : 'GremlinNPC', x : 38, y : 27, Gender: 'monster', NPCBand: '7', skintone: '1'};
mappages["kaltonmine2"].npcs[9] = {name : 'GremlinNPC', x : 37, y : 31, Gender: 'monster', NPCBand: '7', skintone: '1'};
mappages["kaltonmine2"].npcs[10] = {name : 'GremlinNPC', x : 37, y : 32, Gender: 'monster', NPCBand: '7', skintone: '1'};
mappages["kaltonmine2"].npcs[11] = {name : 'GremlinNPC', x : 38, y : 34, Gender: 'monster', NPCBand: '7', skintone: '1'};
mappages["kaltonmine2"].npcs[12] = {name : 'GremlinNPC', x : 36, y : 36, Gender: 'monster', NPCBand: '7', skintone: '1'};
mappages["kaltonmine2"].npcs[13] = {name : 'GremlinNPC', x : 38, y : 37, Gender: 'monster', NPCBand: '7', skintone: '1'};
mappages["kaltonmine2"].npcs[14] = {name : 'GremlinNPC', x : 22, y : 20, Gender: 'monster', NPCBand: '6', skintone: '1'};
mappages["kaltonmine2"].npcs[15] = {name : 'GremlinNPC', x : 22, y : 22, Gender: 'monster', NPCBand: '6', skintone: '1'};
mappages["kaltonmine2"].npcs[16] = {name : 'GremlinNPC', x : 23, y : 22, Gender: 'monster', NPCBand: '6', skintone: '1'};
mappages["kaltonmine2"].npcs[17] = {name : 'GremlinNPC', x : 21, y : 24, Gender: 'monster', NPCBand: '6', skintone: '1'};
mappages["kaltonmine2"].npcs[18] = {name : 'GremlinNPC', x : 22, y : 25, Gender: 'monster', NPCBand: '6', skintone: '1'};
mappages["kaltonmine2"].npcs[19] = {name : 'GremlinNPC', x : 4, y : 30, Gender: 'monster', NPCBand: '8', skintone: '1'};
mappages["kaltonmine2"].npcs[20] = {name : 'GremlinNPC', x : 5, y : 30, skintone: '1'};
mappages["kaltonmine2"].npcs[21] = {name : 'GremlinNPC', x : 5, y : 30, Gender: 'monster', NPCBand: '8', skintone: '1'};
mappages["kaltonmine2"].npcs[22] = {name : 'GremlinNPC', x : 6, y : 30, Gender: 'monster', NPCBand: '8', skintone: '1'};
mappages["kaltonmine2"].npcs[23] = {name : 'GremlinNPC', x : 5, y : 32, Gender: 'monster', NPCBand: '8', skintone: '1'};
mappages["kaltonmine2"].npcs[24] = {name : 'GremlinNPC', x : 4, y : 35, Gender: 'monster', NPCBand: '8', skintone: '1'};
mappages["kaltonmine2"].npcs[25] = {name : 'GremlinNPC', x : 6, y : 34, Gender: 'monster', NPCBand: '8', skintone: '1'};
mappages["kaltonmine2"].npcs[26] = {name : 'GremlinNPC', x : 29, y : 19, Gender: 'monster', NPCBand: '3', skintone: '1'};
mappages["kaltonmine2"].npcs[27] = {name : 'GremlinNPC', x : 30, y : 18, Gender: 'monster', NPCBand: '3', skintone: '1'};
mappages["kaltonmine2"].npcs[28] = {name : 'GremlinNPC', x : 28, y : 17, Gender: 'monster', NPCBand: '3', skintone: '1'};
mappages["kaltonmine2"].npcs[29] = {name : 'GremlinNPC', x : 26, y : 15, Gender: 'monster', NPCBand: '3', skintone: '1'};
mappages["kaltonmine2"].npcs[30] = {name : 'GremlinNPC', x : 23, y : 13, Gender: 'monster', NPCBand: '3', skintone: '1'};
mappages["kaltonmine2"].npcs[31] = {name : 'GremlinNPC', x : 25, y : 12, Gender: 'monster', NPCBand: '3', skintone: '1'};
mappages["kaltonmine2"].npcs[32] = {name : 'GremlinNPC', x : 24, y : 11, Gender: 'monster', NPCBand: '3', skintone: '1'};
mappages["kaltonmine2"].npcs[33] = {name : 'GremlinNPC', x : 36, y : 11, Gender: 'monster', NPCBand: '4', skintone: '1'};
mappages["kaltonmine2"].npcs[34] = {name : 'GremlinNPC', x : 37, y : 8, Gender: 'monster', NPCBand: '4', skintone: '1'};
mappages["kaltonmine2"].npcs[35] = {name : 'GremlinNPC', x : 36, y : 6, Gender: 'monster', NPCBand: '4', skintone: '1'};
mappages["kaltonmine2"].npcs[36] = {name : 'GremlinNPC', x : 38, y : 5, Gender: 'monster', NPCBand: '4', skintone: '1'};
mappages["kaltonmine2"].npcs[37] = {name : 'GremlinNPC', x : 38, y : 9, Gender: 'monster', NPCBand: '4', skintone: '1'};
mappages["kaltonmine2"].npcs[38] = {name : 'CyclopsNPC', x : 13, y : 28, skintone: '1'};
mappages["kaltonmine2"].npcs[39] = {name : 'CyclopsNPC', x : 14, y : 23, Gender: 'monster', NPCBand: '5', skintone: '1'};
mappages["kaltonmine2"].npcs[40] = {name : 'CyclopsNPC', x : 4, y : 8, Gender: 'monster', NPCBand: '1', skintone: '1'};
mappages["kaltonmine2"].npcs[41] = {name : 'EttinNPC', x : 10, y : 21, Gender: 'monster', NPCBand: '5', skintone: '1'};
mappages["kaltonmine2"].npcs[42] = {name : 'EttinNPC', x : 9, y : 5, Gender: 'monster', NPCBand: '1', skintone: '1'};

mappages["kaltonmine2"].desc = "Kalton Mine (L2)";
mappages["kaltonmine2"].longdesc = ``;
mappages["kaltonmine2"].music = 'Dungeon';
mappages["kaltonmine2"].savename = `Kalton Mine`;
mappages["kaltonmine2"].exitmap = '';
mappages["kaltonmine2"].exitx = '65';
mappages["kaltonmine2"].exity = '70';
mappages["kaltonmine2"].wraps = 'None';
mappages["kaltonmine2"].enterx = '65';
mappages["kaltonmine2"].entery = '70';
mappages["kaltonmine2"].seeBelow = '';
mappages["kaltonmine2"].lightLevel = 'dark';
mappages["kaltonmine2"].alwaysRemember = '0';
mappages["kaltonmine2"].scale = '1';
mappages["kaltonmine2"].underground = '1';
mappages["kaltonmine2"].undergroundDesc = 'Level 2';
mappages["kaltonmine2"].enterscript = '';
mappages["kaltonmine2"].entertestscript = '';
mappages["kaltonmine2"].exitscript = '';
mappages["kaltonmine2"].exittestscript = '';
mappages["kaltonmine2"].returnmap = 'darkunknown';
mappages["kaltonmine2"].returnx = '39';
mappages["kaltonmine2"].returny = '48';
mappages["kaltonmine2"].returninfused = '0';
mappages["kaltonmine2"].linkedMaps = ["kaltonmine1","kaltonmine2"];
mappages["kaltonmine2"].editorLabels = '{}';
// MAP ENDS HERE

mappages["kaltonmine2"].onload = function(mapref) {
  if ((gamestate.getMode() !== "loadgame") && (!DU.gameflags.getFlag("editor"))) {
    let npcs = mapref.npcs.getAll();
    for (let i=0;i<npcs.length;i++) {
      if (npcs[i].getName() === "GremlinNPC") {
        // Gremlins in this mine have been collecting gems off the floor
        npcs[i].lootTable = "GremlinMine";
      }
    }

    let spawn = localFactory.createTile("Spawner");
    let spawngroup = ["GremlinNPC"];

    spawn.setSpawngroup(spawngroup);
    spawn.setMaxSpawns(5);
    spawn.setSpawnRadius(2);

    let freq = 70 + Dice.roll("1d20");
    spawn.setSpawnFreq(freq);
  
    mapref.placeThing(37,28,spawn);

    let orc1 = mapref.getTile(36,25).getTopNPC();
    let orc2 = mapref.getTile(38,27).getTopNPC();
    let orc3 = mapref.getTile(37,31).getTopNPC();
    let orc4 = mapref.getTile(37,32).getTopNPC();
    let orc5 = mapref.getTile(38,34).getTopNPC();

    spawn.addSpawned(orc1);
    spawn.addSpawned(orc2);
    spawn.addSpawned(orc3);
    spawn.addSpawned(orc4);
    spawn.addSpawned(orc5);

    orc1.setSpawnedBy(spawn);
    orc2.setSpawnedBy(spawn);
    orc3.setSpawnedBy(spawn);
    orc4.setSpawnedBy(spawn);
    orc5.setSpawnedBy(spawn);


    spawn = localFactory.createTile("Spawner");
    spawngroup = ["GremlinNPC"];

    spawn.setSpawngroup(spawngroup);
    spawn.setMaxSpawns(5);
    spawn.setSpawnRadius(2);

    freq = 70 + Dice.roll("1d20");
    spawn.setSpawnFreq(freq);
  
    mapref.placeThing(5,33,spawn);

    orc1 = mapref.getTile(5,32).getTopNPC();
    orc2 = mapref.getTile(6,34).getTopNPC();
    orc3 = mapref.getTile(4,35).getTopNPC();
    orc4 = mapref.getTile(5,30).getTopNPC();
    orc5 = mapref.getTile(6,30).getTopNPC();

    spawn.addSpawned(orc1);
    spawn.addSpawned(orc2);
    spawn.addSpawned(orc3);
    spawn.addSpawned(orc4);
    spawn.addSpawned(orc5);

    orc1.setSpawnedBy(spawn);
    orc2.setSpawnedBy(spawn);
    orc3.setSpawnedBy(spawn);
    orc4.setSpawnedBy(spawn);
    orc5.setSpawnedBy(spawn);


    spawn = localFactory.createTile("Spawner");
    spawngroup = ["ReaperNPC"];

    spawn.setSpawngroup(spawngroup);
    spawn.setMaxSpawns(2);
    spawn.setSpawnRadius(2);

    freq = 70 + Dice.roll("1d20");
    spawn.setSpawnFreq(freq);
  
    mapref.placeThing(14,12,spawn);

    orc1 = mapref.getTile(14,11).getTopNPC();
    orc2 = mapref.getTile(13,13).getTopNPC();

    spawn.addSpawned(orc1);
    spawn.addSpawned(orc2);

    orc1.setSpawnedBy(spawn);
    orc2.setSpawnedBy(spawn);


    spawn = localFactory.createTile("Spawner");
    spawngroup = ["GremlinNPC"];

    spawn.setSpawngroup(spawngroup);
    spawn.setMaxSpawns(5);
    spawn.setSpawnRadius(2);

    freq = 70 + Dice.roll("1d20");
    spawn.setSpawnFreq(freq);
  
    mapref.placeThing(27,15,spawn);

    orc1 = mapref.getTile(26,15).getTopNPC();
    orc2 = mapref.getTile(28,17).getTopNPC();
    orc3 = mapref.getTile(25,12).getTopNPC();
    orc4 = mapref.getTile(23,13).getTopNPC();
    orc5 = mapref.getTile(24,11).getTopNPC();

    spawn.addSpawned(orc1);
    spawn.addSpawned(orc2);
    spawn.addSpawned(orc3);
    spawn.addSpawned(orc4);
    spawn.addSpawned(orc5);

    orc1.setSpawnedBy(spawn);
    orc2.setSpawnedBy(spawn);
    orc3.setSpawnedBy(spawn);
    orc4.setSpawnedBy(spawn);
    orc5.setSpawnedBy(spawn);
  }
}

// MAP BEGINS HERE
mappages["kaltonmine3"] = {};
mappages["kaltonmine3"].terrain = [];
 mappages["kaltonmine3"].terrain[0] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["kaltonmine3"].terrain[1] = 'BK BK BK BK BK BK BK BK cw cw cw cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["kaltonmine3"].terrain[2] = 'BK BK BK BK BK BK BK cw cw cf cf cf cw cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["kaltonmine3"].terrain[3] = 'BK BK BK BK BK cw cw cw cf cf cf cf cf cf cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["kaltonmine3"].terrain[4] = 'BK BK BK BK BK cw cf cf cf cf cf cf cf cf cf cw BK BK BK BK BK BK BK BK cw cw cw BK BK BK BK BK';
 mappages["kaltonmine3"].terrain[5] = 'BK BK BK BK cw cw cf cf cf cw cw cf cf cf cf cw BK BK BK BK BK BK cw cw cw cf cw BK BK BK BK BK';
 mappages["kaltonmine3"].terrain[6] = 'BK BK BK BK cw cf cf cf cw cw cw cw cf cf cf cw BK BK BK BK BK cw cw cf cf cf cw BK BK BK BK BK';
 mappages["kaltonmine3"].terrain[7] = 'BK BK BK BK cw cf cf cf cw BK BK cw cf cf cw cw BK BK BK BK BK cw cf cf cf cf cw BK BK BK BK BK';
 mappages["kaltonmine3"].terrain[8] = 'BK BK BK BK cw cw cf cf cw BK BK cw cf cf cw BK BK BK BK BK cw cw cf cf cf cw cw BK BK BK BK BK';
 mappages["kaltonmine3"].terrain[9] = 'BK BK BK BK cw cw cf cw cw BK BK cw cw cw cw BK BK BK cw cw cw cf cf cf cw cw BK BK BK BK BK BK';
mappages["kaltonmine3"].terrain[10] = 'BK BK BK BK cw cf cf cf cw cw BK BK BK BK BK BK BK BK cw cf cf cf cf cw cw BK BK BK BK BK BK BK';
mappages["kaltonmine3"].terrain[11] = 'BK BK BK BK cw cf cf cf cf cw cw BK BK BK BK BK BK cw cw cf cf cf cf cw BK BK BK BK BK BK BK BK';
mappages["kaltonmine3"].terrain[12] = 'BK BK BK BK cw cf cf cf cf cf cw cw BK BK BK cw cw cw cf cf cf cf cw cw BK BK BK BK BK BK BK BK';
mappages["kaltonmine3"].terrain[13] = 'BK BK BK BK cw cw cf cf cf cf cf cw cw cw cw cw cf cf cf cf cf cf cw BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine3"].terrain[14] = 'BK BK BK BK BK cw cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cf cw BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine3"].terrain[15] = 'BK BK BK BK BK cw cw cw cf cf cf cf cf cf cf cf cf cw cw cw cf cf cw cw BK BK BK BK BK BK BK BK';
mappages["kaltonmine3"].terrain[16] = 'BK BK BK BK BK BK BK cw cw cf cf cf cf cf cf cw cw cw BK cw cf cf cf cw BK BK BK BK BK BK BK BK';
mappages["kaltonmine3"].terrain[17] = 'BK BK BK BK BK BK BK BK cw cw cw cw cw cw cw cw BK BK BK cw cw cf cf cw BK BK BK BK BK BK BK BK';
mappages["kaltonmine3"].terrain[18] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cf cf cw BK BK BK BK BK BK BK BK';
mappages["kaltonmine3"].terrain[19] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cw cf cf cw cw BK BK BK BK BK BK BK';
mappages["kaltonmine3"].terrain[20] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cw cw cf cf cf cf cw BK BK BK BK BK BK BK';
mappages["kaltonmine3"].terrain[21] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cw cw uu cf cf cf cf cf cw cw cw BK BK BK BK BK';
mappages["kaltonmine3"].terrain[22] = 'BK BK BK BK BK BK BK BK BK BK cw cw cw cw cw cw cf uu uu cf cf cf cf cf cf cf cw BK BK BK BK BK';
mappages["kaltonmine3"].terrain[23] = 'BK BK BK BK BK BK BK cw cw cw cw cf cf cf cf cf cf uu uu cw cw cw cf cf cf cf cw cw BK BK BK BK';
mappages["kaltonmine3"].terrain[24] = 'BK BK BK BK BK BK BK cw cf cf cf cf cf cf cf cf cf cw cw cw BK cw cw cw cf cf cf cw BK BK BK BK';
mappages["kaltonmine3"].terrain[25] = 'BK BK BK BK BK BK cw cw cf cf cf cf cf cf cf cw cw cw BK BK BK BK BK cw cw cf cf cw cw BK BK BK';
mappages["kaltonmine3"].terrain[26] = 'BK BK BK BK cw cw cw cf cf cf cf cw cw cw cw cw BK BK BK BK BK BK BK BK cw cf cf cf cw BK BK BK';
mappages["kaltonmine3"].terrain[27] = 'BK BK BK BK cw cf cf cf cf cw cw cw BK BK BK BK BK BK BK BK BK BK BK BK cw cw cf cf cw BK BK BK';
mappages["kaltonmine3"].terrain[28] = 'BK BK BK BK cw cf cf cf cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK cw cw cw cw BK BK BK';
mappages["kaltonmine3"].terrain[29] = 'BK BK BK BK cw cw cw cw cw BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine3"].terrain[30] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["kaltonmine3"].terrain[31] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';

mappages["kaltonmine3"].features = [];
mappages["kaltonmine3"].features[0] = {name : 'LadderUp', x : 12, y : 7, entermap : 'kaltonmine2', enterx : 13, entery : 15};
mappages["kaltonmine3"].features[1] = {name : 'LadderDown', x : 26, y : 26, entermap : 'underworld', enterx : 28, entery : 56};
mappages["kaltonmine3"].features[2] = {name : 'PileOfRocks', x : 25, y : 5};
mappages["kaltonmine3"].features[3] = {name : 'PileOfRocks', x : 25, y : 6};
mappages["kaltonmine3"].features[4] = {name : 'PileOfRocks', x : 23, y : 6};
mappages["kaltonmine3"].features[5] = {name : 'PileOfRocks', x : 24, y : 8};
mappages["kaltonmine3"].features[6] = {name : 'PileOfRocks', x : 11, y : 23};
mappages["kaltonmine3"].features[7] = {name : 'PileOfRocks', x : 10, y : 26};
mappages["kaltonmine3"].features[8] = {name : 'PileOfRocks', x : 7, y : 28};
mappages["kaltonmine3"].features[9] = {name : 'PileOfRocks', x : 5, y : 27};
mappages["kaltonmine3"].features[10] = {name : 'PileOfRocks', x : 8, y : 24};
mappages["kaltonmine3"].features[11] = {name : 'PileOfRocks', x : 9, y : 24};
mappages["kaltonmine3"].features[12] = {name : 'PileOfRocks', x : 7, y : 26};
mappages["kaltonmine3"].features[13] = {name : 'PileOfRocks', x : 14, y : 25};
mappages["kaltonmine3"].features[14] = {name : 'PileOfRocks', x : 15, y : 24};
mappages["kaltonmine3"].features[15] = {name : 'PileOfRocks', x : 16, y : 24};
mappages["kaltonmine3"].features[16] = {name : 'PileOfRocks', x : 16, y : 22};
mappages["kaltonmine3"].features[17] = {name : 'PileOfRocks', x : 6, y : 14};
mappages["kaltonmine3"].features[18] = {name : 'PileOfRocks', x : 8, y : 11};
mappages["kaltonmine3"].features[19] = {name : 'PileOfRocks', x : 11, y : 14};
mappages["kaltonmine3"].features[20] = {name : 'PileOfRocks', x : 9, y : 2};


mappages["kaltonmine3"].npcs = [];
mappages["kaltonmine3"].npcs[0] = {name : 'GazerNPC', x : 6, y : 5, skintone: '1'};
mappages["kaltonmine3"].npcs[1] = {name : 'GazerNPC', x : 5, y : 11, skintone: '1'};
mappages["kaltonmine3"].npcs[2] = {name : 'GazerNPC', x : 7, y : 13, skintone: '1'};
mappages["kaltonmine3"].npcs[3] = {name : 'DrakeNPC', x : 24, y : 7, Gender: 'monster', NPCBand: '1', skintone: '1'};
mappages["kaltonmine3"].npcs[4] = {name : 'DrakeNPC', x : 22, y : 8, Gender: 'monster', NPCBand: '1', skintone: '1'};
mappages["kaltonmine3"].npcs[5] = {name : 'DrakeNPC', x : 22, y : 10, Gender: 'monster', NPCBand: '1', skintone: '1'};
mappages["kaltonmine3"].npcs[6] = {name : 'DragonNPC', x : 25, y : 7, Gender: 'monster', NPCBand: '1', skintone: '1'};
mappages["kaltonmine3"].npcs[7] = {name : 'ReaperNPC', x : 21, y : 20, Gender: 'monster', NPCBand: '2', skintone: '1'};
mappages["kaltonmine3"].npcs[8] = {name : 'ReaperNPC', x : 23, y : 22, Gender: 'monster', NPCBand: '2', skintone: '1'};
mappages["kaltonmine3"].npcs[9] = {name : 'ReaperNPC', x : 25, y : 24, Gender: 'monster', NPCBand: '2', skintone: '1'};
mappages["kaltonmine3"].npcs[10] = {name : 'ReaperNPC', x : 13, y : 15, skintone: '1'};

mappages["kaltonmine3"].desc = "Kalton Mine (L3)";
mappages["kaltonmine3"].longdesc = ``;
mappages["kaltonmine3"].music = 'Dungeon';
mappages["kaltonmine3"].savename = `Kalton Mine`;
mappages["kaltonmine3"].exitmap = '';
mappages["kaltonmine3"].exitx = '65';
mappages["kaltonmine3"].exity = '70';
mappages["kaltonmine3"].wraps = '';
mappages["kaltonmine3"].enterx = '65';
mappages["kaltonmine3"].entery = '70';
mappages["kaltonmine3"].seeBelow = '';
mappages["kaltonmine3"].lightLevel = 'dark';
mappages["kaltonmine3"].alwaysRemember = '0';
mappages["kaltonmine3"].scale = '1';
mappages["kaltonmine3"].underground = '1';
mappages["kaltonmine3"].undergroundDesc = 'Level 3';
mappages["kaltonmine3"].enterscript = '';
mappages["kaltonmine3"].entertestscript = '';
mappages["kaltonmine3"].exitscript = '';
mappages["kaltonmine3"].exittestscript = '';
mappages["kaltonmine3"].returnmap = 'darkunknown';
mappages["kaltonmine3"].returnx = '39';
mappages["kaltonmine3"].returny = '48';
mappages["kaltonmine3"].returninfused = '0';
mappages["kaltonmine3"].linkedMaps = ["kaltonmine2","kaltonmine1"];
mappages["kaltonmine3"].editorLabels = '{}';
// MAP ENDS HERE

mappages["kaltonmine3"].onload = function(mapref) {
  if ((gamestate.getMode() !== "loadgame") && (!DU.gameflags.getFlag("editor"))) {
    let spawn = localFactory.createTile("Spawner");
    let spawngroup = ["DrakeNPC","DrakeNPC","DragonNPC"];

    spawn.setSpawngroup(spawngroup);
    spawn.setMaxSpawns(3);
    spawn.setSpawnRadius(2);

    let freq = 70 + Dice.roll("1d20");
    spawn.setSpawnFreq(freq);
  
    mapref.placeThing(23,8,spawn);

    let orc1 = mapref.getTile(36,25).getTopNPC();
    let orc2 = mapref.getTile(38,27).getTopNPC();
    let orc3 = mapref.getTile(37,31).getTopNPC();

    spawn.addSpawned(orc1);
    spawn.addSpawned(orc2);
    spawn.addSpawned(orc3);

    orc1.setSpawnedBy(spawn);
    orc2.setSpawnedBy(spawn);
    orc3.setSpawnedBy(spawn);
  }
}