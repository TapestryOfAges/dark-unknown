"use strict";

mappages["twistoffate1"] = {};
mappages["twistoffate1"].terrain = [];
 mappages["twistoffate1"].terrain[0] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate1"].terrain[1] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate1"].terrain[2] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate1"].terrain[3] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate1"].terrain[4] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate1"].terrain[5] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate1"].terrain[6] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate1"].terrain[7] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% hf hf %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate1"].terrain[8] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% hf hf hf hf hf %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate1"].terrain[9] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% hf hf hf hf hf hf hf hf %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[10] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% hf hf hf hf hf hf hf hf hf hf hf %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[11] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% hf hf hf hf hf hf hf %% %% hf %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[12] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf hf %% %% %% %% %% %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[13] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK %% hf hf hf hf hf %% %% BK BK %% %% %% %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[14] = 'BK BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf %% %% %% %% %% %% %% hf hf hf hf %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[15] = 'BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf %% BK %% %% hf hf hf hf hf hf hf hf hf %% %% %% BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[16] = 'BK BK BK BK BK BK BK BK BK %% %% %% hf hf hf hf %% %% %% %% hf hf hf hf hf hf hf hf hf hf hf hf %% %% BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[17] = 'BK BK BK BK BK BK BK BK %% %% hf hf hf hf hf %% %% %% %% hf hf hf hf %% %% hf hf hf hf hf hf hf hf %% %% BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[18] = 'BK BK BK BK BK BK BK BK %% hf hf hf hf hf %% %% %% hf hf hf hf %% %% %% %% %% %% %% hf hf hf hf hf hf %% %% %% BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[19] = 'BK BK BK BK BK BK BK %% %% hf hf hf hf %% %% %% %% hf hf hf %% %% %% hf hf %% %% %% %% %% hf hf hf hf hf %% %% BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[20] = 'BK BK BK BK BK BK %% %% hf hf hf hf %% %% BK %% hf hf hf %% %% hf hf hf hf hf hf hf hf %% %% hf hf hf hf hf %% BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[21] = 'BK BK BK BK BK BK %% hf hf hf hf hf %% BK %% %% hf hf hf %% %% hf hf hf hf hf hf hf hf hf %% %% hf hf hf hf %% BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[22] = 'BK BK BK BK BK BK %% hf hf hf hf hf %% %% %% hf hf hf hf %% %% hf hf hf %% %% %% hf hf hf hf %% %% hf hf hf %% %% BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[23] = 'BK BK BK BK BK BK %% hf hf hf hf %% %% %% hf hf hf hf %% %% %% %% hf %% %% BK %% %% hf hf hf %% %% %% hf hf hf %% BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[24] = 'BK BK BK BK BK BK %% %% hf hf hf %% BK %% hf hf hf hf %% %% %% hf hf hf %% %% %% %% %% hf hf hf %% %% hf hf hf %% BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[25] = 'BK BK BK BK BK BK BK %% hf hf hf %% %% %% hf hf hf hf %% %% hf hf hf hf hf %% %% %% %% hf hf hf %% %% hf hf hf %% BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[26] = 'BK BK BK BK BK BK BK %% hf hf hf hf %% %% %% hf hf hf %% %% hf hf hf hf hf %% %% %% %% hf hf hf %% %% hf hf hf %% BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[27] = 'BK BK BK BK BK BK BK %% hf hf hf hf %% %% %% hf hf hf %% %% hf hf hf hf hf %% %% %% %% hf hf hf %% %% hf hf hf %% BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[28] = 'BK BK BK BK BK BK BK %% %% hf hf hf hf %% %% %% hf hf hf %% %% hf hf hf %% %% %% %% %% hf hf hf %% %% hf hf hf %% BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[29] = 'BK BK BK BK BK BK BK BK %% hf hf hf hf %% %% %% hf hf hf %% %% %% hf %% %% %% %% %% %% hf hf hf %% hf hf hf hf %% BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[30] = 'BK BK BK BK BK BK BK BK %% %% hf hf hf %% %% %% hf hf hf hf hf hf hf hf hf %% %% hf hf hf hf hf %% hf hf hf hf %% BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[31] = 'BK BK BK BK BK BK BK BK BK %% hf hf hf hf %% %% %% hf hf hf hf hf hf hf %% %% %% hf hf hf hf %% %% hf hf hf %% %% BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[32] = 'BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf %% %% %% hf hf hf hf hf %% %% %% %% hf hf hf hf %% hf hf hf hf %% BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[33] = 'BK BK BK BK BK BK BK BK BK BK %% hf hf hf hf hf %% %% %% %% %% %% %% %% %% %% hf hf hf hf %% %% hf hf hf hf %% BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[34] = 'BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf hf hf %% %% %% %% %% %% %% %% hf hf hf hf %% hf hf hf hf %% %% BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[35] = 'BK BK BK BK BK BK BK BK BK BK BK %% %% %% hf hf hf hf hf hf hf hf hf hf hf hf hf hf hf %% %% hf hf hf hf %% %% BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[36] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf hf hf hf hf hf hf hf hf hf %% %% hf hf hf hf %% %% BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[37] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% hf hf hf hf hf hf hf hf %% %% %% %% hf hf hf hf hf %% %% BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[38] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% hf %% %% %% %% %% %% %% %% %% %% %% %% %% hf hf hf hf hf %% BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[39] = 'BK BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf hf hf %% %% %% %% %% %% %% %% hf hf hf hf hf %% %% BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[40] = 'BK BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf hf hf hf %% %% %% hf hf hf hf hf hf hf hf %% %% %% BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[41] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK %% hf hf hf hf hf hf hf hf hf hf hf hf hf hf hf hf hf %% %% %% BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[42] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK %% hf hf hf hf hf hf hf hf hf hf hf hf hf hf hf %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[43] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf hf hf hf hf hf hf hf hf %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[44] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% hf %% %% %% %% %% %% %% %% %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[45] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[46] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[47] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[48] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate1"].terrain[49] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';

mappages["twistoffate1"].features = [];
mappages["twistoffate1"].features[0] = {name : 'LadderUp', x : 22, y : 26, entermap : 'darkunknown', enterx : 22, entery : 117};
mappages["twistoffate1"].features[1] = {name : 'LadderDown', x : 15, y : 38, entermap : 'twistoffate2', enterx : 19, entery : 38};
mappages["twistoffate1"].features[2] = {name : 'LadderDown', x : 26, y : 11, entermap : 'twistoffate2', enterx : 30, entery : 11};
mappages["twistoffate1"].features[3] = {name : 'PileOfRocks', x : 24, y : 25};


mappages["twistoffate1"].npcs = [];
mappages["twistoffate1"].npcs[0] = {name : 'GremlinNPC', x : 26, y : 16, NPCBand: '1', skintone: '1'};
mappages["twistoffate1"].npcs[1] = {name : 'GremlinNPC', x : 27, y : 17, NPCBand: '1', skintone: '1'};
mappages["twistoffate1"].npcs[2] = {name : 'GremlinNPC', x : 28, y : 15, NPCBand: '1', skintone: '1'};
mappages["twistoffate1"].npcs[3] = {name : 'GremlinNPC', x : 29, y : 16, NPCBand: '1', skintone: '1'};
mappages["twistoffate1"].npcs[4] = {name : 'GremlinNPC', x : 30, y : 17, NPCBand: '1', skintone: '1'};
mappages["twistoffate1"].npcs[5] = {name : 'GremlinNPC', x : 29, y : 18, NPCBand: '1', skintone: '1'};
mappages["twistoffate1"].npcs[6] = {name : 'GremlinNPC', x : 31, y : 16, NPCBand: '1', skintone: '1'};
mappages["twistoffate1"].npcs[7] = {name : 'GremlinNPC', x : 31, y : 18, NPCBand: '1', skintone: '1'};
mappages["twistoffate1"].npcs[8] = {name : 'GremlinNPC', x : 32, y : 19, NPCBand: '1', skintone: '1'};
mappages["twistoffate1"].npcs[9] = {name : 'GremlinNPC', x : 33, y : 20, NPCBand: '1', skintone: '1'};
mappages["twistoffate1"].npcs[10] = {name : 'GremlinNPC', x : 34, y : 19, NPCBand: '1', skintone: '1'};
mappages["twistoffate1"].npcs[11] = {name : 'GremlinNPC', x : 33, y : 18, NPCBand: '1', skintone: '1'};
mappages["twistoffate1"].npcs[12] = {name : 'GremlinNPC', x : 32, y : 21, NPCBand: '1', skintone: '1'};
mappages["twistoffate1"].npcs[13] = {name : 'CyclopsNPC', x : 34, y : 20, skintone: '1'};
mappages["twistoffate1"].npcs[14] = {name : 'CyclopsNPC', x : 33, y : 21, skintone: '1'};
mappages["twistoffate1"].npcs[15] = {name : 'ReaperNPC', x : 21, y : 41, skintone: '1'};
mappages["twistoffate1"].npcs[16] = {name : 'ReaperNPC', x : 24, y : 43, skintone: '1'};
mappages["twistoffate1"].npcs[17] = {name : 'GiantBatNPC', x : 32, y : 33, skintone: '1'};
mappages["twistoffate1"].npcs[18] = {name : 'GiantBatNPC', x : 35, y : 30, skintone: '1'};
mappages["twistoffate1"].npcs[19] = {name : 'EttinNPC', x : 19, y : 35, skintone: '1'};
mappages["twistoffate1"].npcs[20] = {name : 'EttinNPC', x : 12, y : 32, skintone: '1'};
mappages["twistoffate1"].npcs[21] = {name : 'EttinNPC', x : 9, y : 25, skintone: '1'};
mappages["twistoffate1"].npcs[22] = {name : 'EttinNPC', x : 13, y : 16, skintone: '1'};

mappages["twistoffate1"].desc = "Twist of Fate (L1)";
mappages["twistoffate1"].longdesc = ``;
mappages["twistoffate1"].music = 'Dungeon';
mappages["twistoffate1"].savename = `Twist of Fate`;
mappages["twistoffate1"].exitmap = 'darkunknown';
mappages["twistoffate1"].exitx = '22';
mappages["twistoffate1"].exity = '117';
mappages["twistoffate1"].wraps = '';
mappages["twistoffate1"].enterx = '22';
mappages["twistoffate1"].entery = '22';
mappages["twistoffate1"].seeBelow = '';
mappages["twistoffate1"].lightLevel = 'dark';
mappages["twistoffate1"].alwaysRemember = '0';
mappages["twistoffate1"].scale = '1';
mappages["twistoffate1"].underground = '1';
mappages["twistoffate1"].undergroundDesc = 'Level 1';
mappages["twistoffate1"].enterscript = '';
mappages["twistoffate1"].entertestscript = '';
mappages["twistoffate1"].exitscript = '';
mappages["twistoffate1"].exittestscript = '';
mappages["twistoffate1"].returnmap = 'darkunknown';
mappages["twistoffate1"].returnx = '22';
mappages["twistoffate1"].returny = '117';
mappages["twistoffate1"].returninfused = '0';
mappages["twistoffate1"].linkedMaps = ["twistoffate2","twistoffate3"];
mappages["twistoffate1"].editorLabels = '{}';


mappages["twistoffate1"].onload = function(mapref) {
  if ((gamestate.getMode() !== "loadgame") && (!DU.gameflags.getFlag("editor"))) { 
    let spawn = localFactory.createTile("Spawner");
    let spawngroup = ["GremlinNPC"];

    spawn.setSpawngroup(spawngroup);
    spawn.setMaxSpawns(10);
    spawn.setSpawnRadius(3);

    let freq = 30 + Dice.roll("1d20");
    spawn.setSpawnFreq(freq);
  
    mapref.placeThing(31,18,spawn);

    spawn = localFactory.createTile("Spawner");
    spawngroup = ["EttinNPC", "EttinNPC", "EttinSorcererNPC"];

    spawn.setSpawngroup(spawngroup);
    spawn.setMaxSpawns(3);
    spawn.setSpawnRadius(3);

    freq = 90 + Dice.roll("1d20");
    spawn.setSpawnFreq(freq);
  
    mapref.placeThing(19,10,spawn);

  }
}

mappages["twistoffate2"] = {};
mappages["twistoffate2"].terrain = [];
 mappages["twistoffate2"].terrain[0] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate2"].terrain[1] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate2"].terrain[2] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate2"].terrain[3] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% %% %% %% %% %% %% %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate2"].terrain[4] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% hf hf hf hf hf hf hf hf hf hf %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate2"].terrain[5] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% %% %% %% %% hf hf hf hf hf hf hf hf hf hf hf hf %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate2"].terrain[6] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% %% hf hf hf hf hf hf hf hf hf hf %% hf %% %% %% hf hf hf hf %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate2"].terrain[7] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf hf hf hf hf hf hf %% hf %% %% df df df %% %% hf hf hf hf %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate2"].terrain[8] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% hf hf hf hf hf hf %% %% hf %% %% %% df df df df df df %% %% hf hf hf hf %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate2"].terrain[9] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf hf %% %% df df df df df df %% %% %% %% %% %% hf hf hf hf hf %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[10] = 'BK BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf %% hf %% df df df df df df %% %% hf hf hf hf hf hf hf hf %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[11] = 'BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf %% %% df df df df df df %% %% %% %% hf hf hf hf hf hf hf %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[12] = 'BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf %% %% df df df df df df %% %% BK BK %% hf hf hf %% %% %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[13] = 'BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf %% %% df df df df df df df %% %% %% %% %% %% %% %% %% %% df %% %% %% %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[14] = 'BK BK BK BK BK BK BK BK %% %% hf hf hf hf %% %% df df df df df df df df df df df df df df df df df df df df df df df df %% BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[15] = 'BK BK BK BK BK BK BK BK %% hf hf hf hf %% %% df df df df df df df df df df df df df df df df df df df df df df df df df %% BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[16] = 'BK BK BK BK BK BK BK %% %% hf hf hf hf hf df df df df df df df df df df df df %% hf %% %% %% %% %% hf %% %% %% %% hf %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[17] = 'BK BK BK BK BK BK BK %% hf hf hf hf %% %% df df df df df df df df df df df %% %% hf hf hf hf hf hf hf hf hf hf hf hf %% %% %% %% BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[18] = 'BK BK BK BK BK BK %% %% hf hf hf %% %% df df df df df df df df %% hf %% %% %% hf hf hf hf hf hf hf hf hf hf hf hf hf hf hf hf %% %% %% BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[19] = 'BK BK BK BK BK BK %% hf hf hf hf %% df df df df df df df df %% %% hf hf hf hf hf hf hf %% %% hf %% %% %% hf %% hf hf hf hf hf hf hf %% %% BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[20] = 'BK BK BK BK BK BK %% hf hf hf %% %% df df df df df df df %% %% hf hf hf hf hf hf hf %% %% df df df df df df %% %% %% %% hf hf hf hf hf %% %% BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[21] = 'BK BK BK BK BK %% %% hf hf hf hf df df df df df df df df %% hf hf hf %% %% %% hf %% %% df df df df df df df df df df %% hf %% hf hf hf hf %% %% BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[22] = 'BK BK BK BK BK %% hf hf hf hf %% df df df df df df df df hf hf hf hf hf df df df df df df df df df df df df df df df df df %% %% hf hf hf hf %% %% BK BK BK BK BK';
mappages["twistoffate2"].terrain[23] = 'BK BK BK BK BK %% hf hf hf %% %% df df df df df df df df %% hf hf %% %% df df df %% %% %% %% %% %% %% df df df df df df df df %% %% hf hf hf hf %% %% BK BK BK BK';
mappages["twistoffate2"].terrain[24] = 'BK BK BK BK BK %% hf hf hf hf %% %% df df df df df df df %% hf hf hf %% %% %% %% %% hf hf %% %% hf %% %% %% df df df df df df df %% %% hf hf hf hf %% BK BK BK BK';
mappages["twistoffate2"].terrain[25] = 'BK BK BK BK BK %% %% hf hf hf hf %% %% df df df df df df %% hf hf hf hf hf hf hf hf hf hf %% %% hf hf hf %% %% df df df df df df df %% %% hf hf hf %% BK BK BK BK';
mappages["twistoffate2"].terrain[26] = 'BK BK BK BK BK BK %% %% hf hf hf hf %% hf %% df df df df %% %% %% hf hf hf hf hf hf %% %% %% %% hf hf hf hf %% df df df df df df df df hf hf hf hf %% BK BK BK BK';
mappages["twistoffate2"].terrain[27] = 'BK BK BK BK BK BK BK %% %% hf hf hf hf hf %% %% df df df df df %% %% %% %% %% %% %% %% df %% %% %% hf hf hf %% df df df df df df df df %% %% hf hf %% %% BK BK BK';
mappages["twistoffate2"].terrain[28] = 'BK BK BK BK BK BK BK BK %% %% hf hf hf hf hf %% hf %% %% df df df df df df df df df df df hf hf hf hf hf hf %% df df df df df df df df df %% hf hf hf %% BK BK BK';
mappages["twistoffate2"].terrain[29] = 'BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf hf hf hf %% %% %% hf %% df df df df df df %% %% hf hf hf hf %% %% df df df df df df df df df hf hf hf hf %% BK BK BK';
mappages["twistoffate2"].terrain[30] = 'BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf hf hf hf hf hf hf %% %% %% hf %% %% %% %% hf hf hf hf %% %% df df df df df df df df df df %% hf hf hf %% BK BK BK';
mappages["twistoffate2"].terrain[31] = 'BK BK BK BK BK BK BK BK BK BK BK %% %% %% hf %% hf hf hf hf hf hf hf hf hf hf hf hf hf hf hf hf hf %% %% df df df df df df df df df df %% %% hf hf hf %% BK BK BK';
mappages["twistoffate2"].terrain[32] = 'BK BK BK BK BK BK BK BK BK BK BK BK %% df df %% %% %% hf %% hf hf hf hf hf hf hf hf hf hf hf hf %% %% df df df df df df df df df df %% %% hf hf hf %% %% BK BK BK';
mappages["twistoffate2"].terrain[33] = 'BK BK BK BK BK BK BK BK BK BK BK BK %% %% df df df df df %% %% %% %% hf %% %% %% %% hf hf %% %% %% df df df df df df df df df df df hf hf hf hf hf %% BK BK BK BK';
mappages["twistoffate2"].terrain[34] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK %% df df df df df df df df df df df df df %% hf %% %% df df df df df df df df df df df df %% %% hf hf hf %% %% BK BK BK BK';
mappages["twistoffate2"].terrain[35] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% %% df df df df df df df df df df df df df df df df df df df df df df df df df %% %% hf hf hf %% %% BK BK BK BK BK';
mappages["twistoffate2"].terrain[36] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% %% %% %% df df df df df df df df df df df df df df df df df df df %% %% hf hf hf hf %% BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[37] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% hf hf hf %% %% %% %% df df df df df df df df df df df df df df %% hf %% hf hf hf hf %% %% BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[38] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf hf %% %% %% %% %% %% df df df df df df df df df df %% %% %% hf hf hf hf hf %% %% BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[39] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf hf hf %% %% %% %% df df df df df df df df df df %% hf %% hf hf hf hf hf %% %% %% BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[40] = 'BK BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf %% %% %% %% df df df df df df df df df df %% %% %% %% hf hf hf hf hf hf %% %% BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[41] = 'BK BK BK BK BK BK BK BK BK BK BK BK %% hf hf hf hf %% %% df df df df df df df df df df %% hf %% %% hf hf hf hf hf hf hf %% %% %% BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[42] = 'BK BK BK BK BK BK BK BK BK BK BK BK %% hf hf hf %% %% df df df df df df df df df %% %% %% hf hf hf hf hf hf hf hf %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[43] = 'BK BK BK BK BK BK BK BK BK BK BK BK %% hf hf hf hf %% df df df df df df %% %% %% %% hf hf hf hf hf hf hf %% %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[44] = 'BK BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf %% %% %% %% hf %% %% %% hf hf hf hf hf hf hf %% %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[45] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf hf hf %% hf hf hf hf hf hf hf hf hf %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[46] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% hf hf hf hf hf hf hf hf hf hf hf hf %% %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[47] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% hf hf hf hf hf hf hf %% %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[48] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% hf hf hf %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[49] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[50] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[51] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[52] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[53] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate2"].terrain[54] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';

mappages["twistoffate2"].features = [];
mappages["twistoffate2"].features[0] = {name : 'LadderUp', x : 19, y : 38, entermap : 'twistoffate1', enterx : 15, entery : 38};
mappages["twistoffate2"].features[1] = {name : 'LadderUp', x : 30, y : 11, entermap : 'twistoffate1', enterx : 26, entery : 11};
mappages["twistoffate2"].features[2] = {name : 'LadderDown', x : 32, y : 24, entermap : 'twistoffate3', enterx : 16, entery : 12};
mappages["twistoffate2"].features[3] = {name : 'LadderDown', x : 29, y : 25, entermap : 'twistoffate3', enterx : 13, entery : 13};
mappages["twistoffate2"].features[4] = {name : 'StonePortcullis', x : 21, y : 44, locked : 1};
mappages["twistoffate2"].features[5] = {name : 'StonePortcullis', x : 30, y : 41, locked : 1};
mappages["twistoffate2"].features[6] = {name : 'StonePortcullis', x : 36, y : 39, locked : 1};
mappages["twistoffate2"].features[7] = {name : 'StonePortcullis', x : 40, y : 37, locked : 1};
mappages["twistoffate2"].features[8] = {name : 'StonePortcullis', x : 44, y : 33, locked : 1};
mappages["twistoffate2"].features[9] = {name : 'StonePortcullis', x : 46, y : 29, locked : 1};
mappages["twistoffate2"].features[10] = {name : 'StonePortcullis', x : 45, y : 26, locked : 1};
mappages["twistoffate2"].features[11] = {name : 'StonePortcullis', x : 40, y : 21, locked : 1};
mappages["twistoffate2"].features[12] = {name : 'StonePortcullis', x : 35, y : 19, locked : 1};
mappages["twistoffate2"].features[13] = {name : 'StonePortcullis', x : 31, y : 19, locked : 1};
mappages["twistoffate2"].features[14] = {name : 'StonePortcullis', x : 26, y : 21, locked : 1};
mappages["twistoffate2"].features[15] = {name : 'StonePortcullis', x : 23, y : 22, locked : 1};
mappages["twistoffate2"].features[16] = {name : 'StonePortcullis', x : 19, y : 22, locked : 1};
mappages["twistoffate2"].features[17] = {name : 'StonePortcullis', x : 22, y : 18, locked : 1};
mappages["twistoffate2"].features[18] = {name : 'StonePortcullis', x : 27, y : 16, locked : 1};
mappages["twistoffate2"].features[19] = {name : 'StonePortcullis', x : 33, y : 16, locked : 1};
mappages["twistoffate2"].features[20] = {name : 'StonePortcullis', x : 38, y : 16, locked : 1};
mappages["twistoffate2"].features[21] = {name : 'StonePortcullis', x : 28, y : 34, locked : 1};
mappages["twistoffate2"].features[22] = {name : 'StonePortcullis', x : 23, y : 33, locked : 1};
mappages["twistoffate2"].features[23] = {name : 'StonePortcullis', x : 18, y : 32, locked : 1};
mappages["twistoffate2"].features[24] = {name : 'StonePortcullis', x : 14, y : 31, locked : 1};
mappages["twistoffate2"].features[25] = {name : 'StonePortcullis', x : 16, y : 28, locked : 1};
mappages["twistoffate2"].features[26] = {name : 'StonePortcullis', x : 21, y : 29, locked : 1};
mappages["twistoffate2"].features[27] = {name : 'StonePortcullis', x : 25, y : 30, locked : 1};
mappages["twistoffate2"].features[28] = {name : 'StonePortcullis', x : 30, y : 28, locked : 1};
mappages["twistoffate2"].features[29] = {name : 'StonePortcullis', x : 13, y : 26, locked : 1};
mappages["twistoffate2"].features[30] = {name : 'StonePortcullis', x : 10, y : 21, locked : 1};
mappages["twistoffate2"].features[31] = {name : 'StonePortcullis', x : 13, y : 16, locked : 1};
mappages["twistoffate2"].features[32] = {name : 'StonePortcullis', x : 19, y : 10, locked : 1};
mappages["twistoffate2"].features[33] = {name : 'StonePortcullis', x : 23, y : 8, locked : 1};
mappages["twistoffate2"].features[34] = {name : 'StonePortcullis', x : 27, y : 7, locked : 1};
mappages["twistoffate2"].features[35] = {name : 'StonePortcullis', x : 30, y : 6, locked : 1};
mappages["twistoffate2"].features[36] = {name : 'Chest', x : 21, y : 13, locked : 0, lootgroup : 'Level3'};
mappages["twistoffate2"].features[37] = {name : 'Chest', x : 19, y : 16, locked : 0, lootgroup : 'Level4'};
mappages["twistoffate2"].features[38] = {name : 'Chest', x : 16, y : 18, locked : 0, lootgroup : 'Level5'};
mappages["twistoffate2"].features[39] = {name : 'Chest', x : 14, y : 22, locked : 0, lootgroup : 'Level4'};
mappages["twistoffate2"].features[40] = {name : 'Chest', x : 17, y : 25, locked : 0, lootgroup : 'Level3'};
mappages["twistoffate2"].features[41] = {name : 'Chest', x : 37, y : 22, locked : 0, lootgroup : 'Level3'};
mappages["twistoffate2"].features[42] = {name : 'Chest', x : 39, y : 25, locked : 0, lootgroup : 'Level4'};
mappages["twistoffate2"].features[43] = {name : 'Chest', x : 42, y : 28, locked : 0, lootgroup : 'Level5'};
mappages["twistoffate2"].features[44] = {name : 'Chest', x : 38, y : 31, locked : 0, lootgroup : 'Level4'};
mappages["twistoffate2"].features[45] = {name : 'Chest', x : 36, y : 35, locked : 0, lootgroup : 'Level3'};
mappages["twistoffate2"].features[46] = {name : 'Chest', x : 33, y : 36, locked : 0, lootgroup : 'Level5'};
mappages["twistoffate2"].features[47] = {name : 'Chest', x : 29, y : 38, locked : 0, lootgroup : 'Level4'};
mappages["twistoffate2"].features[48] = {name : 'OrbStrength', x : 39, y : 33};
mappages["twistoffate2"].features[49] = {name : 'OrbIntelligence', x : 19, y : 15};


mappages["twistoffate2"].npcs = [];
mappages["twistoffate2"].npcs[0] = {name : 'ReaperNPC', x : 23, y : 34, skintone: '1'};
mappages["twistoffate2"].npcs[1] = {name : 'ReaperNPC', x : 13, y : 25, skintone: '1'};
mappages["twistoffate2"].npcs[2] = {name : 'ReaperNPC', x : 14, y : 16, skintone: '1'};
mappages["twistoffate2"].npcs[3] = {name : 'ReaperNPC', x : 23, y : 9, skintone: '1'};
mappages["twistoffate2"].npcs[4] = {name : 'ReaperNPC', x : 26, y : 22, skintone: '1'};
mappages["twistoffate2"].npcs[5] = {name : 'ReaperNPC', x : 33, y : 15, skintone: '1'};
mappages["twistoffate2"].npcs[6] = {name : 'ReaperNPC', x : 45, y : 29, skintone: '1'};
mappages["twistoffate2"].npcs[7] = {name : 'ReaperNPC', x : 40, y : 36, skintone: '1'};
mappages["twistoffate2"].npcs[8] = {name : 'ReaperNPC', x : 21, y : 43, skintone: '1'};
mappages["twistoffate2"].npcs[9] = {name : 'GazerNPC', x : 30, y : 40, skintone: '1'};
mappages["twistoffate2"].npcs[10] = {name : 'GazerNPC', x : 36, y : 38, skintone: '1'};
mappages["twistoffate2"].npcs[11] = {name : 'GazerNPC', x : 43, y : 33, skintone: '1'};
mappages["twistoffate2"].npcs[12] = {name : 'GazerNPC', x : 44, y : 26, skintone: '1'};
mappages["twistoffate2"].npcs[13] = {name : 'GazerNPC', x : 40, y : 22, skintone: '1'};
mappages["twistoffate2"].npcs[14] = {name : 'GazerNPC', x : 35, y : 20, skintone: '1'};
mappages["twistoffate2"].npcs[15] = {name : 'GazerNPC', x : 31, y : 20, skintone: '1'};
mappages["twistoffate2"].npcs[16] = {name : 'GazerNPC', x : 27, y : 15, skintone: '1'};
mappages["twistoffate2"].npcs[17] = {name : 'GazerNPC', x : 38, y : 15, skintone: '1'};
mappages["twistoffate2"].npcs[18] = {name : 'GazerNPC', x : 22, y : 17, skintone: '1'};
mappages["twistoffate2"].npcs[19] = {name : 'GazerNPC', x : 18, y : 22, skintone: '1'};
mappages["twistoffate2"].npcs[20] = {name : 'GazerNPC', x : 11, y : 21, skintone: '1'};
mappages["twistoffate2"].npcs[21] = {name : 'GazerNPC', x : 16, y : 27, skintone: '1'};
mappages["twistoffate2"].npcs[22] = {name : 'GazerNPC', x : 21, y : 28, skintone: '1'};
mappages["twistoffate2"].npcs[23] = {name : 'GazerNPC', x : 29, y : 28, skintone: '1'};
mappages["twistoffate2"].npcs[24] = {name : 'GazerNPC', x : 19, y : 11, skintone: '1'};
mappages["twistoffate2"].npcs[25] = {name : 'GazerNPC', x : 30, y : 7, skintone: '1'};
mappages["twistoffate2"].npcs[26] = {name : 'GazerNPC', x : 14, y : 32, skintone: '1'};
mappages["twistoffate2"].npcs[27] = {name : 'GazerNPC', x : 28, y : 35, skintone: '1'};
mappages["twistoffate2"].npcs[28] = {name : 'MimicNPC', x : 30, y : 37, skintone: '1'};
mappages["twistoffate2"].npcs[29] = {name : 'MimicNPC', x : 32, y : 37, skintone: '1'};
mappages["twistoffate2"].npcs[30] = {name : 'MimicNPC', x : 34, y : 35, skintone: '1'};
mappages["twistoffate2"].npcs[31] = {name : 'MimicNPC', x : 37, y : 34, skintone: '1'};
mappages["twistoffate2"].npcs[32] = {name : 'MimicNPC', x : 39, y : 30, skintone: '1'};
mappages["twistoffate2"].npcs[33] = {name : 'MimicNPC', x : 41, y : 29, skintone: '1'};
mappages["twistoffate2"].npcs[34] = {name : 'MimicNPC', x : 40, y : 26, skintone: '1'};
mappages["twistoffate2"].npcs[35] = {name : 'MimicNPC', x : 38, y : 23, skintone: '1'};
mappages["twistoffate2"].npcs[36] = {name : 'MimicNPC', x : 29, y : 22, skintone: '1'};
mappages["twistoffate2"].npcs[37] = {name : 'MimicNPC', x : 15, y : 23, skintone: '1'};
mappages["twistoffate2"].npcs[38] = {name : 'MimicNPC', x : 15, y : 19, skintone: '1'};
mappages["twistoffate2"].npcs[39] = {name : 'MimicNPC', x : 18, y : 17, skintone: '1'};
mappages["twistoffate2"].npcs[40] = {name : 'MimicNPC', x : 20, y : 14, skintone: '1'};
mappages["twistoffate2"].npcs[41] = {name : 'MimicNPC', x : 30, y : 14, skintone: '1'};
mappages["twistoffate2"].npcs[42] = {name : 'DelverNPC', x : 21, y : 15, skintone: '1'};
mappages["twistoffate2"].npcs[43] = {name : 'DelverNPC', x : 15, y : 21, skintone: '1'};
mappages["twistoffate2"].npcs[44] = {name : 'DelverNPC', x : 39, y : 24, skintone: '1'};
mappages["twistoffate2"].npcs[45] = {name : 'DelverNPC', x : 35, y : 34, skintone: '1'};
mappages["twistoffate2"].npcs[46] = {name : 'DelverNPC', x : 25, y : 37, skintone: '1'};
mappages["twistoffate2"].npcs[47] = {name : 'EttinNPC', x : 18, y : 15, skintone: '1'};
mappages["twistoffate2"].npcs[48] = {name : 'EttinNPC', x : 22, y : 12, skintone: '1'};
mappages["twistoffate2"].npcs[49] = {name : 'EttinNPC', x : 35, y : 22, skintone: '1'};
mappages["twistoffate2"].npcs[50] = {name : 'EttinNPC', x : 36, y : 32, skintone: '1'};
mappages["twistoffate2"].npcs[51] = {name : 'EttinNPC', x : 24, y : 41, skintone: '1'};

mappages["twistoffate2"].desc = "Twist of Fate (L2)";
mappages["twistoffate2"].longdesc = ``;
mappages["twistoffate2"].music = 'Dungeon';
mappages["twistoffate2"].savename = `Twist of Fate`;
mappages["twistoffate2"].exitmap = '';
mappages["twistoffate2"].exitx = '65';
mappages["twistoffate2"].exity = '70';
mappages["twistoffate2"].wraps = '';
mappages["twistoffate2"].enterx = '65';
mappages["twistoffate2"].entery = '70';
mappages["twistoffate2"].seeBelow = '';
mappages["twistoffate2"].lightLevel = 'dark';
mappages["twistoffate2"].alwaysRemember = '0';
mappages["twistoffate2"].scale = '1';
mappages["twistoffate2"].underground = '1';
mappages["twistoffate2"].undergroundDesc = 'Level 2';
mappages["twistoffate2"].enterscript = '';
mappages["twistoffate2"].entertestscript = '';
mappages["twistoffate2"].exitscript = '';
mappages["twistoffate2"].exittestscript = '';
mappages["twistoffate2"].returnmap = 'darkunknown';
mappages["twistoffate2"].returnx = '22';
mappages["twistoffate2"].returny = '117';
mappages["twistoffate2"].returninfused = '0';
mappages["twistoffate2"].linkedMaps = ["twistoffate1","twistoffate3"];
mappages["twistoffate2"].editorLabels = '{}';

mappages["twistoffate2"].onload = function(mapref) {
  if ((gamestate.getMode() !== "loadgame") && (!DU.gameflags.getFlag("editor"))) { 
    let spawn = localFactory.createTile("Spawner");
    let spawngroup = ["GazerNPC"];

    spawn.setSpawngroup(spawngroup);
    spawn.setMaxSpawns(3);
    spawn.setSpawnRadius(3);

    let freq = 70 + Dice.roll("1d20");
    spawn.setSpawnFreq(freq);
  
    mapref.placeThing(17,17,spawn);

    spawn = localFactory.createTile("Spawner");
    spawngroup = ["EttinNPC", "EttinNPC", "EttinSorcererNPC"];

    spawn.setSpawngroup(spawngroup);
    spawn.setMaxSpawns(3);
    spawn.setSpawnRadius(3);

    freq = 90 + Dice.roll("1d20");
    spawn.setSpawnFreq(freq);
  
    mapref.placeThing(39,31,spawn);

  }
}


mappages["twistoffate3"] = {};
mappages["twistoffate3"].terrain = [];
 mappages["twistoffate3"].terrain[0] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate3"].terrain[1] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate3"].terrain[2] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate3"].terrain[3] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate3"].terrain[4] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate3"].terrain[5] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate3"].terrain[6] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate3"].terrain[7] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate3"].terrain[8] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
 mappages["twistoffate3"].terrain[9] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[10] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[11] = 'BK BK BK BK BK BK BK BK BK %% %% %% %% %% %% %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[12] = 'BK BK BK BK BK BK BK BK BK %% BK %% %% hf %% %% hf %% %% %% BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[13] = 'BK BK BK BK BK BK BK BK %% %% hf hf hf hf %% %% hf hf hf %% BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[14] = 'BK BK BK BK BK BK BK BK %% hf hf hf %% %% %% %% %% %% hf %% BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[15] = 'BK BK BK BK BK BK BK BK %% hf hf %% %% hf hf hf %% %% hf %% BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[16] = 'BK BK BK BK BK BK BK BK %% hf hf hf hf hf hf hf hf %% hf %% BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[17] = 'BK BK BK BK BK BK BK BK %% %% %% %% hf hf hf hf hf %% hf %% %% %% BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[18] = 'BK BK BK BK BK BK BK BK BK BK BK %% hf hf hf hf hf hf hf hf BK %% BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[19] = 'BK BK BK BK BK BK BK BK BK BK BK %% %% hf hf hf %% %% hf hf hf %% BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[20] = 'BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% %% %% hf hf hf %% %% BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[21] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK %% %% %% %% %% BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[22] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[23] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[24] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[25] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[26] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[27] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[28] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[29] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[30] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';
mappages["twistoffate3"].terrain[31] = 'BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK BK';

mappages["twistoffate3"].features = [];
mappages["twistoffate3"].features[0] = {name : 'StonePortcullis', x : 17, y : 18, locked : 1};
mappages["twistoffate3"].features[1] = {name : 'StonePortcullis', x : 11, y : 16, locked : 1};
mappages["twistoffate3"].features[2] = {name : 'MetalTwisterLever', x : 10, y : 12};
mappages["twistoffate3"].features[3] = {name : 'MetalTwisterLever', x : 20, y : 18};
mappages["twistoffate3"].features[4] = {name : 'LadderUp', x : 13, y : 13, entermap : 'twistoffate2', enterx : 29, entery : 25};
mappages["twistoffate3"].features[5] = {name : 'LadderUp', x : 16, y : 12, entermap : 'twistoffate2', enterx : 32, entery : 24};
mappages["twistoffate3"].features[6] = {name : 'Chest', x : 14, y : 17, locked : 0, lootedid : 'tofsoc', searchyield : 'StoneOfConflagrations'};


mappages["twistoffate3"].npcs = [];

mappages["twistoffate3"].desc = "Twist of Fate (L3)";
mappages["twistoffate3"].longdesc = ``;
mappages["twistoffate3"].music = 'Dungeon';
mappages["twistoffate3"].savename = `Twist of Fate`;
mappages["twistoffate3"].exitmap = '';
mappages["twistoffate3"].exitx = '65';
mappages["twistoffate3"].exity = '70';
mappages["twistoffate3"].wraps = 'None';
mappages["twistoffate3"].enterx = '65';
mappages["twistoffate3"].entery = '70';
mappages["twistoffate3"].seeBelow = '';
mappages["twistoffate3"].lightLevel = 'dark';
mappages["twistoffate3"].alwaysRemember = '0';
mappages["twistoffate3"].scale = '1';
mappages["twistoffate3"].underground = '1';
mappages["twistoffate3"].undergroundDesc = 'Level 3';
mappages["twistoffate3"].enterscript = '';
mappages["twistoffate3"].entertestscript = '';
mappages["twistoffate3"].exitscript = '';
mappages["twistoffate3"].exittestscript = '';
mappages["twistoffate3"].returnmap = 'darkunknown';
mappages["twistoffate3"].returnx = '22';
mappages["twistoffate3"].returny = '117';
mappages["twistoffate3"].returninfused = '0';
mappages["twistoffate3"].linkedMaps = ["twistoffate1","twistoffate2"];
mappages["twistoffate3"].editorLabels = '{}';


mappages["twistoffate3"].throwswitch = function(feature) {
  feature.use = function(user) {
    let level3 = maps.getMap("twistoffate3");
    let level2 = maps.getMap("twistoffate2");
    let retval = {};
    if (!level2) {  // somehow level 2 is not in memory. Load it.
      let otherlevel = new GameMap();
      otherlevel = maps.addMap("twistoffate2");
      level2 = otherlevel;
    }
    if (this.getOverlay() == "switch-off.gif") {  // This switch hasn't been thrown
      this.setOverlay("switch-on.gif");
      retval["txt"] = "Click!";
      
      let checkboth = 1;
      let floor3features = level3.features.getAll();
      let ports = new Array;
      for (let i=0; i<floor3features.length; i++) {
        if (floor3features[i].getName() == "LeverOff") {
          if (floor3features[i].getOverlay() == "switch-off.gif") {
            checkboth = 0;
          }
        }
        if (floor3features[i].getName() == "StonePortcullis") {
          ports[ports.length] = floor3features[i];
        }
      }
      if (checkboth) {  // if both switches are thrown, open the dungeon's doors
        for (let i=0; i<ports.length; i++) {
          ports[i].unlockMe();
          ports[i].use(user);
        }
        let floor2features = level2.features.getAll();
        for (let i=0; i<floor2features.length; i++) {
          if (floor2features[i].getName() == "StonePortcullis") {
            floor2features[i].unlockMe();
            floor2features[i].use(user);
          }
        }
      }
    }
    else {  // for sanity's sake, you can't unthrow a switch
      retval["txt"] = "The switch is stuck."; 
    }
    return retval;
  }
}

